"use strict";window.Flashload||(window.Flashload=function(){var t,e="data-flashload-skip-script",n="data-flashload-skip-link",o={},i=!1,r=y(location.href),a="",s=2e3;function d(e){var o=new URL(location.href).origin,i=new URL(e.href);return!(e.target||e.hasAttribute("download")||o!==i.origin||i.pathname!==a&&0!==i.pathname.indexOf(a+"/")||function(e){if(t&&t(e))return!0;var o=e;for(;o;){if(o.hasAttribute(n))return!0;o=o.parentElement}return!1}(e))}function l(t){var e=t.target.closest("a[href]");e&&d(e)&&h(e)}function c(t){if(!t.metaKey&&!t.ctrlKey){var e=t.target.closest("a[href]");e&&d(e)&&(t.preventDefault(),f(e))}}function u(){var t=y(location.href);if(r!==t){var e=document.createElement("a");e.href=t,d(e)?f(e):location.reload()}}function h(t,e){void 0===e&&(e=!1);var n=t.href,i=y(n);if(!o[i]){var r=new p(n);r.displayOnLoad=e,r.preload(),o[i]=r}}function f(t){o[r]&&(o[r].scrollPos=window.scrollY),m("navigationStarted",{url:t.href});var e=y(t.href);o[e]?(o[e].href=t.href,o[e].display()):h(t,!0)}var p=function(){function t(t){this.displayOnLoad=!1,this.scrollPos=0,this.status="loading",this.xhr=null,this.error=null,this.href=t}return t.prototype.preload=function(){var t=this;m("preloadStarted",{url:this.href});var e=new XMLHttpRequest;e.open("GET",this.href),e.timeout=2e4,e.setRequestHeader("X-FLASHLOAD","1"),e.send(),e.onreadystatechange=function(){2===e.readyState&&("text/html"!==(e.getResponseHeader("Content-Type")||"").toLowerCase().split(";")[0]&&t.setError("Not an HTML response"));4===e.readyState&&(200===e.status?t.setSuccess(e.responseText):t.setError("Request error"))},this.xhr=e},t.prototype.abort=function(){this.xhr&&this.xhr.abort(),delete o[y(this.href)]},t.prototype.setError=function(t){this.status="error",this.error=t,this.displayOnLoad&&this.display()},t.prototype.setSuccess=function(t){this.status="success",m("preloadEnded",{url:this.href});var e=document.implementation.createHTMLDocument("");e.documentElement.innerHTML=t,this.setTitleAndBody(e.title,e.body),this.displayOnLoad&&this.display()},t.prototype.setTitleAndBody=function(t,e){this.title=t,this.body=e},t.prototype.display=function(){if("loading"===this.status)this.displayOnLoad=!0;else if("error"===this.status)location.href=this.href;else{if(void 0===this.title||void 0===this.body)return void console.error("Title and body is not set");var t=y(location.href);t!==this.href&&(o[t]&&(o[t].scrollPos=window.scrollY),history.pushState(null,"",this.href)),r=this.href,document.title=this.title,document.documentElement.replaceChild(this.body,document.body),window.scrollTo(0,this.scrollPos),function(){for(var t,n=document.body.getElementsByTagName("script"),o=0;o<n.length;o++){var i=n[o];i.hasAttribute(e)||(null===(t=i.parentNode)||void 0===t||t.replaceChild(r(i),i))}function r(t){var e=document.createElement("script");e.text=t.innerHTML;for(var n,o=-1,i=t.attributes;++o<i.length;)e.setAttribute((n=i[o]).name,n.value);return e}}(),m("navigationEnded",{url:this.href});var n=this.href.split("#")[1];if(n){var i=document.getElementById(n);i&&i.scrollIntoView()}else location.hash=""}},t}();function m(t,e){document.dispatchEvent(new CustomEvent("flashload:"+t,{detail:e,bubbles:!0,cancelable:!0,composed:!1}))}function y(t){var e=t.indexOf("#");return-1==e?t:t.substring(0,e)}return{start:function(e){if(void 0===e&&(e={}),!i){i=!0,e.basePath&&(a="/"+e.basePath.replace(/^\/|\/$/g,"")),e.exclude&&(t=e.exclude),"number"==typeof e.barDelay&&(s=e.barDelay),!0===e.bar&&function(t){var e=document.createElement("style");e.innerHTML="#flashload-bar-container{position:fixed;top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;transition:opacity .25s .1s;opacity:0}.flashload-bar{background:#000;width:100%;margin-left:-100%;height:2px;transition:all .25s}",document.head.appendChild(e);var n,o,i,r=!1;function a(t){o&&(o.style.transform="translate("+t+"%)"),i=t,document.getElementById(n.id)||document.body.appendChild(n)}function s(){if(r){var t=i+1+2*Math.random();t>=98&&(t=98),a(t),setTimeout(s,50)}}function d(){r&&(document.getElementById(n.id)&&document.body.removeChild(n),n.style.opacity="1",setTimeout((function(){a(10+10*Math.random())}),0),setTimeout(s,1))}(n=document.createElement("div")).id="flashload-bar-container",(o=document.createElement("div")).id="flashload-bar",o.className=o.id,n.appendChild(o),document.body.appendChild(n),document.addEventListener("flashload:navigationStarted",(function(){r=!0,setTimeout(d,t)})),document.addEventListener("flashload:navigationEnded",(function(){r=!1,document.body.appendChild(n),setTimeout((function(){a(i)}),0),setTimeout((function(){a(100),setTimeout((function(){n.style.opacity="0"}),100)}),1)}))}(s),document.addEventListener("mouseover",l,!0),document.addEventListener("touchstart",l,!0),document.addEventListener("click",c,!0),window.addEventListener("popstate",u,!0);var n=new p(r);n.setTitleAndBody(document.title,document.body),n.status="success",o[r]=n}}}}());
